{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"d0a3\"],{\"5Dct\":function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=l();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n(\"q1tI\")),r=u(n(\"TSYQ\")),o=u(n(\"dmUQ\")),i=u(n(\"Pbn2\")),s=n(\"vgIT\");function u(e){return e&&e.__esModule?e:{default:e}}function l(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){return(c=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return!t||\"object\"!==c(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},y=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(e=h(this,m(t).apply(this,arguments))).saveInputNumber=function(t){e.inputNumberRef=t},e.renderInputNumber=function(t){var n,s=t.getPrefixCls,u=e.props,l=u.className,c=u.size,f=u.prefixCls,h=g(u,[\"className\",\"size\",\"prefixCls\"]),m=s(\"input-number\",f),v=(0,r.default)((d(n={},\"\".concat(m,\"-lg\"),\"large\"===c),d(n,\"\".concat(m,\"-sm\"),\"small\"===c),n),l),y=a.createElement(i.default,{type:\"up\",className:\"\".concat(m,\"-handler-up-inner\")}),b=a.createElement(i.default,{type:\"down\",className:\"\".concat(m,\"-handler-down-inner\")});return a.createElement(o.default,p({ref:e.saveInputNumber,className:v,upHandler:y,downHandler:b,prefixCls:m},h))},e}var n,u,l;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,a.Component),n=t,(u=[{key:\"focus\",value:function(){this.inputNumberRef.focus()}},{key:\"blur\",value:function(){this.inputNumberRef.blur()}},{key:\"render\",value:function(){return a.createElement(s.ConfigConsumer,null,this.renderInputNumber)}}])&&f(n.prototype,u),l&&f(n,l),t}();t.default=y,y.defaultProps={step:1}},EQeY:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=h();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n(\"q1tI\")),r=f(n(\"TSYQ\")),o=f(n(\"BGR+\")),i=n(\"VCL8\"),s=f(n(\"Pbn2\")),u=f(n(\"QG2g\")),l=n(\"vgIT\"),c=n(\"dANV\"),p=f(n(\"aVg8\")),d=f(n(\"ev5A\"));function f(e){return e&&e.__esModule?e:{default:e}}function h(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function m(e){return(m=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function b(e,t){return!t||\"object\"!==m(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},E=new RegExp(\"^(\".concat(c.PresetColorTypes.join(\"|\"),\")(-inverse)?$\")),x=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(n=b(this,w(t).call(this,e))).state={visible:!0},n.handleIconClick=function(e){n.setVisible(!1,e)},n.renderTag=function(e){var t=n.props,r=t.children,i=O(t,[\"children\"]),s=\"onClick\"in i||r&&\"a\"===r.type,u=(0,o.default)(i,[\"onClose\",\"afterClose\",\"color\",\"visible\",\"closable\",\"prefixCls\"]);return s?a.createElement(d.default,null,a.createElement(\"span\",g({},u,{className:n.getTagClassName(e),style:n.getTagStyle()}),r,n.renderCloseIcon())):a.createElement(\"span\",g({},u,{className:n.getTagClassName(e),style:n.getTagStyle()}),r,n.renderCloseIcon())},(0,p.default)(!(\"afterClose\"in e),\"Tag\",\"'afterClose' will be deprecated, please use 'onClose', we will remove this in the next version.\"),n}var n,i,u;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,a.Component),n=t,u=[{key:\"getDerivedStateFromProps\",value:function(e){return\"visible\"in e?{visible:e.visible}:null}}],(i=[{key:\"getTagStyle\",value:function(){var e=this.props,t=e.color,n=e.style,a=this.isPresetColor();return g({backgroundColor:t&&!a?t:void 0},n)}},{key:\"getTagClassName\",value:function(e){var t,n=e.getPrefixCls,a=this.props,o=a.prefixCls,i=a.className,s=a.color,u=this.state.visible,l=this.isPresetColor(),c=n(\"tag\",o);return(0,r.default)(c,(v(t={},\"\".concat(c,\"-\").concat(s),l),v(t,\"\".concat(c,\"-has-color\"),s&&!l),v(t,\"\".concat(c,\"-hidden\"),!u),t),i)}},{key:\"setVisible\",value:function(e,t){var n=this.props,a=n.onClose,r=n.afterClose;a&&a(t),r&&!a&&r(),t.defaultPrevented||\"visible\"in this.props||this.setState({visible:e})}},{key:\"isPresetColor\",value:function(){var e=this.props.color;return!!e&&E.test(e)}},{key:\"renderCloseIcon\",value:function(){return this.props.closable?a.createElement(s.default,{type:\"close\",onClick:this.handleIconClick}):null}},{key:\"render\",value:function(){return a.createElement(l.ConfigConsumer,null,this.renderTag)}}])&&y(n.prototype,i),u&&y(n,u),t}();x.CheckableTag=u.default,x.defaultProps={closable:!1},(0,i.polyfill)(x);var P=x;t.default=P},H0SL:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){var e=n(\"cMU6\");return{page:e.default||e}}])},PAYn:function(e,t,n){\"use strict\";n(\"VEUW\"),n(\"fcTV\")},QG2g:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a,r=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n(\"q1tI\")),o=(a=n(\"TSYQ\"))&&a.__esModule?a:{default:a},i=n(\"vgIT\");function s(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){return(u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return!t||\"object\"!==u(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(e=d(this,f(t).apply(this,arguments))).handleClick=function(){var t=e.props,n=t.checked,a=t.onChange;a&&a(!n)},e.renderCheckableTag=function(t){var n,a=t.getPrefixCls,i=e.props,s=i.prefixCls,u=i.className,p=i.checked,d=m(i,[\"prefixCls\",\"className\",\"checked\"]),f=a(\"tag\",s),h=(0,o.default)(f,(c(n={},\"\".concat(f,\"-checkable\"),!0),c(n,\"\".concat(f,\"-checkable-checked\"),p),n),u);return delete d.onChange,r.createElement(\"span\",l({},d,{className:h,onClick:e.handleClick}))},e}var n,a,s;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r.Component),n=t,(a=[{key:\"render\",value:function(){return r.createElement(i.ConfigConsumer,null,this.renderCheckableTag)}}])&&p(n.prototype,a),s&&p(n,s),t}();t.default=v},\"b+Mx\":function(e,t,n){\"use strict\";n(\"VEUW\"),n(\"kLeP\")},cMU6:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",function(){return _});n(\"PAYn\");var a=n(\"EQeY\"),r=n.n(a),o=(n(\"nTym\"),n(\"qu0K\")),i=n.n(o),s=(n(\"b+Mx\"),n(\"5Dct\")),u=n.n(s),l=(n(\"MaXC\"),n(\"4IMT\")),c=n.n(l),p=(n(\"cUip\"),n(\"iJl9\")),d=n.n(p),f=(n(\"tL+A\"),n(\"QpBz\")),h=n.n(f),m=n(\"0iUn\"),v=n(\"sLSF\"),g=n(\"MI3g\"),y=n(\"a7VT\"),b=n(\"AT/M\"),w=n(\"Tit0\"),C=n(\"q1tI\"),O=n.n(C),E=n(\"OLV9\"),x=n(\"HgRd\"),P=n(\"5PEn\"),S=n.n(P),T=n(\"mVpe\"),N=n.n(T),_=function(e){function t(e){var n;Object(m.default)(this,t),(n=Object(g.default)(this,Object(y.default)(t).call(this,e))).state={brands:[],brandTypes:[],cates:[],brandTypeLoading:!1,textureLoading:!1,image:null,src:null};return[\"handleChangeBrand\",\"handleChangeBrandType\",\"handleChangeTexture\",\"handleSize\",\"handleRotate\",\"handlePreview\"].forEach(function(e){return n[e]=n[e].bind(Object(b.default)(n))}),n.condition={brand_id:void 0,brand_type_id:void 0,texture_id:void 0},n.imageUploadRef=Object(C.createRef)(),n.imageBgRef=Object(C.createRef)(),n.imageCameraRef=Object(C.createRef)(),n.canvasRef=Object(C.createRef)(),n.boxRef=Object(C.createRef)(),n.previewDialogRef=Object(C.createRef)(),n.uploadInputRef=null,n.select=null,n.moveOptions={x:0,rotate:0},n.hasKeyListener=!1,n}return Object(w.default)(t,e),Object(v.default)(t,[{key:\"componentDidMount\",value:function(){this.getBrands(),this.getCanvas()}},{key:\"getBrands\",value:function(){var e=this;x.a.get(\"/cate/brand\",{is_all:1}).then(function(t){0==t.errcode&&e.setState({brands:t.data})})}},{key:\"getCanvas\",value:function(){var e=this.canvasRef.current,t=this.imageUploadRef.current,n=this.imageBgRef.current,a=this.imageCameraRef.current,r=n&&n.complete?n.height:t&&t.complete?t.height:0,o=e.getContext(\"2d\");if(e.setAttribute(\"width\",918),e.setAttribute(\"height\",r),t&&t.complete){var i=this.moveOptions,s=i.x,u=i.y,l=i.size,c=i.rotate;this.moveOptions.size||(l=this.moveOptions.size=918/t.width,this.forceUpdate()),u||(u=this.moveOptions.y=-(t.height*l-r)/2),e.setAttribute(\"width\",918),e.setAttribute(\"height\",r),c&&(o.translate(459,r/2),o.rotate(c*Math.PI/180),o.translate(-459,-r/2)),o.drawImage(t,s,u,t.width*l,t.height*l)}if(n&&n.complete){for(var p=459-n.width/2,d=o.getImageData(0,0,p,r),f=0;f<d.data.length;f+=4)d.data[f+3]=127.5;o.putImageData(d,0,0);for(var h,m=o.getImageData(p+n.width,0,n.width,r),v=0;v<m.data.length;v+=4)m.data[v+3]=127.5;if(o.putImageData(m,p+n.width,0),t&&t.complete){h=o.getImageData(p,0,n.width,n.height);var g=document.createElement(\"canvas\"),y=g.getContext(\"2d\");g.setAttribute(\"width\",918),g.setAttribute(\"height\",r),y.drawImage(n,0,0,n.width,n.height,p,0,n.width,n.height);for(var b=y.getImageData(p,0,n.width,n.height),w=0;w<b.data.length;w+=4)0==b.data[w+3]&&(h.data[w+3]=127.5)}else{o.drawImage(n,0,0,n.width,n.height,p,0,n.width,n.height),h=o.getImageData(p,0,n.width,n.height);for(var C=0;C<h.data.length;C+=4)0==h.data[C+3]?h.data[C+3]=127.5:h.data[C+3]=0}o.putImageData(h,p,0)}if(a&&a.complete&&n.complete){var O=459-n.width/2,E=document.createElement(\"canvas\"),x=E.getContext(\"2d\");E.setAttribute(\"width\",918),E.setAttribute(\"height\",r),x.drawImage(a,0,0,a.width,r,O,0,n.width,r);for(var P=o.getImageData(O,0,n.width,r),S=x.getImageData(O,0,n.width,n.height),T=0;T<S.data.length;T+=4)255==S.data[T+3]&&(P.data[T]=0,P.data[T+1]=0,P.data[T+2]=0,P.data[T+3]=255);o.putImageData(P,O,0)}}},{key:\"listenerMove\",value:function(){var e=this,t=this.boxRef.current,n=null,a=null;if(!this.hasKeyListener||t){var r=function(t){e.moveOptions.x=t.pageX-n,e.moveOptions.y=t.pageY-a,e.getCanvas()};this.hasKeyListener=!0,t.addEventListener(\"mousedown\",function(o){n=o.pageX-e.moveOptions.x,a=o.pageY-e.moveOptions.y,t.addEventListener(\"mousemove\",r)}),t.addEventListener(\"mouseup\",function(){t.removeEventListener(\"mousemove\",r)}),document.addEventListener(\"keydown\",function(t){[87,83,82,65,68,69].includes(t.keyCode)&&(87==t.keyCode&&(e.moveOptions.y=e.moveOptions.y-1),83==t.keyCode&&(e.moveOptions.y=e.moveOptions.y+1),65==t.keyCode&&(e.moveOptions.x=e.moveOptions.x-1),68==t.keyCode&&(e.moveOptions.x=e.moveOptions.x+1),69==t.keyCode&&(e.moveOptions.size=e.moveOptions.size+.2),82==t.keyCode&&(e.moveOptions.size=e.moveOptions.size-.2),e.getCanvas())})}}},{key:\"handleChangeBrand\",value:function(e){var t=this;this.setState({brandTypeLoading:!0}),x.a.get(\"/cate/brandType\",{brand_id:e,is_all:1}).then(function(n){t.condition.brand_id=e,0==n.errcode&&(t.condition.texture_id=void 0,t.condition.brand_type_id=void 0,t.select=null),t.setState({brandTypes:0==n.errcode?n.data:[],brandTypeLoading:!1})})}},{key:\"handleChangeBrandType\",value:function(e){var t=this;this.condition.brand_type_id=e,this.setState({textureLoading:!0}),x.a.get(\"/cate/brandTypeTexture\",{brand_type_id:e}).then(function(e){t.condition.texture_id=void 0,t.select=null,t.setState({cates:0==e.errcode?e.data:[],textureLoading:!1})})}},{key:\"handleChangeTexture\",value:function(e){var t=this,n=this.state.cates;this.condition.texture_id=e;for(var a=0;a<n.length;a++){var r=n[a];if(r.texture_id==e){this.select=r;break}}this.forceUpdate(function(){t.imageBgRef.current.onload=function(){t.getCanvas()},t.imageCameraRef.current.onload=function(){t.getCanvas()}})}},{key:\"handleSize\",value:function(e){this.moveOptions.size=e/100,this.forceUpdate(),this.getCanvas()}},{key:\"handleRotate\",value:function(e){this.moveOptions.rotate=e,this.getCanvas()}},{key:\"handlePreview\",value:function(){var e=this;if(this.select)if(this.state.image){var t=this.imageBgRef.current,n=this.imageCameraRef.current,a=this.canvasRef.current,r=a.getContext(\"2d\"),o=document.createElement(\"canvas\"),i=o.getContext(\"2d\"),s=document.createElement(\"canvas\"),u=a.width/2-t.width/2,l=r.getImageData(u,0,t.width,t.height);o.setAttribute(\"width\",t.width),o.setAttribute(\"height\",t.height),s.setAttribute(\"width\",t.width),s.setAttribute(\"height\",t.height);var c=s.getContext(\"2d\");c.drawImage(t,0,0,t.width,t.height);for(var p=c.getImageData(0,0,t.width,t.height),d=0;d<l.data.length;d+=4)0===p.data[d+3]?l.data[d+3]=0:0==l.data[d+3]&&(l.data[d]=0,l.data[d+3]=0,l.data[d+3]=0,l.data[d+3]=255);if(n){var f=document.createElement(\"canvas\"),m=f.getContext(\"2d\");f.setAttribute(\"width\",t.width),f.setAttribute(\"height\",t.height),m.drawImage(n,0,0,t.width,t.height);for(var v=m.getImageData(0,0,t.width,t.height),g=0;g<v.data.length;g+=4)0!=v.data[g+3]&&(l.data[g+3]=0)}i.putImageData(l,0,0),this.setState({src:o.toDataURL(\"image/png\")},function(){e.previewDialogRef.current.open()})}else h.a.error(\"请先上传定制图片\");else h.a.error(\"请先选择机型\")}},{key:\"render\",value:function(){var e=this,t=this.state,n=t.brands,a=t.brandTypes,o=t.cates,s=t.brandTypeLoading,l=t.textureLoading,p=t.image,f=t.src,h=this.condition,m=h.brand_id,v=h.brand_type_id,g=h.texture_id,y=this.select;return O.a.createElement(\"div\",{className:\"page-layout-center\"},O.a.createElement(E.a,{ref:this.previewDialogRef,image:f,width:this.imageBgRef.current&&this.imageBgRef.current.width}),O.a.createElement(\"div\",{className:S.a.layoutHome},O.a.createElement(\"div\",{className:S.a.layoutHomeHd},O.a.createElement(E.c,{options:n,fieldName:{label:\"name\",value:\"id\"},placeholder:\"选择品牌\",style:{width:180},onChange:this.handleChangeBrand,value:m}),O.a.createElement(E.c,{options:a,fieldName:{label:\"name\",value:\"id\"},placeholder:\"选择型号\",style:{width:180},value:v,loading:s,onChange:this.handleChangeBrandType}),O.a.createElement(E.c,{options:o,fieldName:{label:\"texture_name\",value:\"texture_id\"},placeholder:\"选择材质\",style:{width:180},loading:l,value:g,onChange:this.handleChangeTexture}),O.a.createElement(d.a,{className:\"hide\",type:\"file\",ref:function(t){return e.uploadInputRef=t&&t.input},accept:\"image/png,image/jpg,image/jpeg\",onChange:function(t){var n=new FileReader;n.readAsDataURL(t.target.files[0]);var a=e;n.onload=function(){a.setState({image:this.result},function(){a.imageUploadRef.current.onload=function(){a.getCanvas(),a.listenerMove()}})}}}),O.a.createElement(c.a,{type:\"primary\",icon:\"cloud-upload\",onClick:function(){return e.uploadInputRef.click()}},\"上传图片\")),O.a.createElement(\"div\",{className:S.a.layoutHomeBd},O.a.createElement(\"div\",{className:S.a.mobilePreview},O.a.createElement(\"div\",{className:S.a.mobilePreviewCanvas,ref:this.boxRef},O.a.createElement(\"div\",{className:\"hide\"},p?O.a.createElement(\"img\",{ref:this.imageUploadRef,crossOrigin:\"\",className:y?\"hide\":\"\",src:p}):null,y?O.a.createElement(\"img\",{ref:this.imageBgRef,crossOrigin:\"\",src:\"\".concat(N.a.production.url.cdn,\"/\").concat(y.size_img)}):null,y&&y.camera_img?O.a.createElement(\"img\",{ref:this.imageCameraRef,crossOrigin:\"\",src:\"\".concat(N.a.production.url.cdn,\"/\").concat(y.camera_img)}):null),O.a.createElement(\"canvas\",{ref:this.canvasRef}))),O.a.createElement(\"div\",{className:S.a.orderConfig},O.a.createElement(i.a,{className:\"inline-form \".concat(S.a.sizeForm)},O.a.createElement(i.a.Item,{label:\"缩放\"},O.a.createElement(u.a,{precision:2,value:100*(this.moveOptions.size||0),onChange:this.handleSize}),O.a.createElement(\"span\",{style:{marginLeft:\"10px\"}},\"%\")),O.a.createElement(i.a.Item,{label:\"旋转\"},O.a.createElement(u.a,{defaultValue:0,onChange:this.handleRotate})),O.a.createElement(i.a.Item,null,O.a.createElement(\"span\",null,O.a.createElement(r.a,null,\"W\"),\"上移\"),\"，\",O.a.createElement(\"span\",null,O.a.createElement(r.a,null,\"S\"),\"下移\"),\"，\",O.a.createElement(\"span\",null,O.a.createElement(r.a,null,\"A\"),\"左移\"),\"，\",O.a.createElement(\"span\",null,O.a.createElement(r.a,null,\"D\"),\"右移\"),\"，\",O.a.createElement(\"span\",null,O.a.createElement(r.a,null,\"E\"),\"放大\"),\"，\",O.a.createElement(\"span\",null,O.a.createElement(r.a,null,\"R\"),\"缩小\"))),O.a.createElement(i.a,null,O.a.createElement(i.a.Item,{label:\"配货标签\"},O.a.createElement(d.a,null)),O.a.createElement(i.a.Item,{label:\"订货数量\"},O.a.createElement(u.a,{precision:0,min:1})),y&&y.texture_attr.length?O.a.createElement(i.a.Item,{label:\"属性(颜色)\"},O.a.createElement(E.c,{options:y.texture_attr,fieldName:{label:\"texture_attr_name\",value:\"id\"},placeholder:\"选择属性\",style:{width:180}})):null,O.a.createElement(i.a.Item,null,O.a.createElement(c.a,{type:\"primary\"},\"提交审核\"),O.a.createElement(c.a,{style:{marginLeft:\"10px\"},onClick:this.handlePreview},\"预览\")))))))}}]),t}(C.Component)},dANV:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.PresetColorTypes=void 0;var a=(0,n(\"KEtS\").tuple)(\"pink\",\"red\",\"yellow\",\"orange\",\"cyan\",\"green\",\"blue\",\"purple\",\"geekblue\",\"magenta\",\"volcano\",\"gold\",\"lime\");t.PresetColorTypes=a},dmUQ:function(e,t,n){\"use strict\";n.r(t);var a=n(\"jo6Y\"),r=n.n(a),o=n(\"QbLZ\"),i=n.n(o),s=n(\"iCc5\"),u=n.n(s),l=n(\"FYw3\"),c=n.n(l),p=n(\"mRg0\"),d=n.n(p),f=n(\"q1tI\"),h=n.n(f),m=n(\"17x9\"),v=n.n(m),g=n(\"TSYQ\"),y=n.n(g),b=n(\"4IlW\"),w=n(\"V7oC\"),C=n.n(w),O=function(e){function t(){u()(this,t);var e=c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={active:!1},e.onTouchStart=function(t){e.triggerEvent(\"TouchStart\",!0,t)},e.onTouchMove=function(t){e.triggerEvent(\"TouchMove\",!1,t)},e.onTouchEnd=function(t){e.triggerEvent(\"TouchEnd\",!1,t)},e.onTouchCancel=function(t){e.triggerEvent(\"TouchCancel\",!1,t)},e.onMouseDown=function(t){e.triggerEvent(\"MouseDown\",!0,t)},e.onMouseUp=function(t){e.triggerEvent(\"MouseUp\",!1,t)},e.onMouseLeave=function(t){e.triggerEvent(\"MouseLeave\",!1,t)},e}return d()(t,e),C()(t,[{key:\"componentDidUpdate\",value:function(){this.props.disabled&&this.state.active&&this.setState({active:!1})}},{key:\"triggerEvent\",value:function(e,t,n){var a=\"on\"+e,r=this.props.children;r.props[a]&&r.props[a](n),t!==this.state.active&&this.setState({active:t})}},{key:\"render\",value:function(){var e=this.props,t=e.children,n=e.disabled,a=e.activeClassName,r=e.activeStyle,o=n?void 0:{onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchCancel,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave},s=h.a.Children.only(t);if(!n&&this.state.active){var u=s.props,l=u.style,c=u.className;return!1!==r&&(r&&(l=i()({},l,r)),c=y()(c,a)),h.a.cloneElement(s,i()({className:c,style:l},o))}return h.a.cloneElement(s,o)}}]),t}(h.a.Component),E=O;O.defaultProps={disabled:!1};var x=function(e){function t(){return u()(this,t),c()(this,e.apply(this,arguments))}return d()(t,e),t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.disabled,a=r()(e,[\"prefixCls\",\"disabled\"]);return h.a.createElement(E,{disabled:n,activeClassName:t+\"-handler-active\"},h.a.createElement(\"span\",a))},t}(f.Component);x.propTypes={prefixCls:v.a.string,disabled:v.a.bool,onTouchStart:v.a.func,onTouchEnd:v.a.func,onMouseDown:v.a.func,onMouseUp:v.a.func,onMouseLeave:v.a.func};var P=x;function S(){}function T(e){e.preventDefault()}var N=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,_=function(e){return null!=e},M=function(e){function t(n){u()(this,t);var a=c()(this,e.call(this,n));j.call(a);var r=void 0;r=\"value\"in n?n.value:n.defaultValue,a.state={focused:n.autoFocus};var o=a.getValidValue(a.toNumber(r));return a.state=i()({},a.state,{inputValue:a.toPrecisionAsStep(o),value:o}),a}return d()(t,e),t.prototype.componentDidMount=function(){this.componentDidUpdate()},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.value,a=t.onChange,r=t.max,o=t.min,i=this.state.focused;if(e){if(e.value!==n){var s=i?n:this.getValidValue(n),u=void 0;u=this.pressingUpOrDown?s:this.inputting?this.rawInput:this.toPrecisionAsStep(s),this.setState({value:s,inputValue:u})}var l=\"value\"in this.props?n:this.state.value;\"max\"in this.props&&e.max!==r&&\"number\"==typeof l&&l>r&&a&&a(r),\"min\"in this.props&&e.min!==o&&\"number\"==typeof l&&l<o&&a&&a(o)}try{if(void 0!==this.cursorStart&&this.state.focused)if(this.partRestoreByAfter(this.cursorAfter)||this.state.value===this.props.value){if(this.currentValue===this.input.value)switch(this.lastKeyCode){case b.a.BACKSPACE:this.fixCaret(this.cursorStart-1,this.cursorStart-1);break;case b.a.DELETE:this.fixCaret(this.cursorStart+1,this.cursorStart+1)}}else{var c=this.cursorStart+1;this.cursorAfter?this.lastKeyCode===b.a.BACKSPACE?c=this.cursorStart-1:this.lastKeyCode===b.a.DELETE&&(c=this.cursorStart):c=this.input.value.length,this.fixCaret(c,c)}}catch(p){}this.lastKeyCode=null,this.pressingUpOrDown&&(this.props.focusOnUpDown&&this.state.focused&&document.activeElement!==this.input&&this.focus(),this.pressingUpOrDown=!1)},t.prototype.componentWillUnmount=function(){this.stop()},t.prototype.getCurrentValidValue=function(e){var t=e;return t=\"\"===t?\"\":this.isNotCompleteNumber(parseFloat(t,10))?this.state.value:this.getValidValue(t),this.toNumber(t)},t.prototype.getRatio=function(e){var t=1;return e.metaKey||e.ctrlKey?t=.1:e.shiftKey&&(t=10),t},t.prototype.getValueFromEvent=function(e){var t=e.target.value.trim().replace(/。/g,\".\");return _(this.props.decimalSeparator)&&(t=t.replace(this.props.decimalSeparator,\".\")),t},t.prototype.getValidValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.min,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.max,a=parseFloat(e,10);return isNaN(a)?e:(a<t&&(a=t),a>n&&(a=n),a)},t.prototype.setValue=function(e,t){var n=this.props.precision,a=this.isNotCompleteNumber(parseFloat(e,10))?null:parseFloat(e,10),r=this.state,o=r.value,i=void 0===o?null:o,s=r.inputValue,u=void 0===s?null:s,l=\"number\"==typeof a?a.toFixed(n):\"\"+a,c=a!==i||l!==\"\"+u;return\"value\"in this.props?this.setState({inputValue:this.toPrecisionAsStep(this.state.value)},t):this.setState({value:a,inputValue:this.toPrecisionAsStep(e)},t),c&&this.props.onChange(a),a},t.prototype.getPrecision=function(e){if(_(this.props.precision))return this.props.precision;var t=e.toString();if(t.indexOf(\"e-\")>=0)return parseInt(t.slice(t.indexOf(\"e-\")+2),10);var n=0;return t.indexOf(\".\")>=0&&(n=t.length-t.indexOf(\".\")-1),n},t.prototype.getMaxPrecision=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.props,a=n.precision,r=n.step;if(_(a))return a;var o=this.getPrecision(t),i=this.getPrecision(r),s=this.getPrecision(e);return e?Math.max(s,o+i):o+i},t.prototype.getPrecisionFactor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getMaxPrecision(e,t);return Math.pow(10,n)},t.prototype.fixCaret=function(e,t){if(void 0!==e&&void 0!==t&&this.input&&this.input.value)try{var n=this.input.selectionStart,a=this.input.selectionEnd;e===n&&t===a||this.input.setSelectionRange(e,t)}catch(r){}},t.prototype.focus=function(){this.input.focus(),this.recordCursorPosition()},t.prototype.blur=function(){this.input.blur()},t.prototype.formatWrapper=function(e){return this.props.formatter?this.props.formatter(e):e},t.prototype.toPrecisionAsStep=function(e){if(this.isNotCompleteNumber(e)||\"\"===e)return e;var t=Math.abs(this.getMaxPrecision(e));return isNaN(t)?e.toString():Number(e).toFixed(t)},t.prototype.isNotCompleteNumber=function(e){return isNaN(e)||\"\"===e||null===e||e&&e.toString().indexOf(\".\")===e.toString().length-1},t.prototype.toNumber=function(e){var t=this.props.precision,n=this.state.focused,a=e&&e.length>16&&n;return this.isNotCompleteNumber(e)||a?e:_(t)?Math.round(e*Math.pow(10,t))/Math.pow(10,t):Number(e)},t.prototype.upStep=function(e,t){var n=this.props.step,a=this.getPrecisionFactor(e,t),r=Math.abs(this.getMaxPrecision(e,t)),o=((a*e+a*n*t)/a).toFixed(r);return this.toNumber(o)},t.prototype.downStep=function(e,t){var n=this.props.step,a=this.getPrecisionFactor(e,t),r=Math.abs(this.getMaxPrecision(e,t)),o=((a*e-a*n*t)/a).toFixed(r);return this.toNumber(o)},t.prototype.step=function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments[3];this.stop(),t&&(t.persist(),t.preventDefault());var o=this.props;if(!o.disabled){var i=this.getCurrentValidValue(this.state.inputValue)||0;if(!this.isNotCompleteNumber(i)){var s=this[e+\"Step\"](i,a),u=s>o.max||s<o.min;s>o.max?s=o.max:s<o.min&&(s=o.min),this.setValue(s),this.setState({focused:!0}),u||(this.autoStepTimer=setTimeout(function(){n[e](t,a,!0)},r?200:600))}}},t.prototype.render=function(){var e,t=i()({},this.props),n=t.prefixCls,a=t.disabled,o=t.readOnly,s=t.useTouch,u=t.autoComplete,l=t.upHandler,c=t.downHandler,p=(r()(t,[\"prefixCls\",\"disabled\",\"readOnly\",\"useTouch\",\"autoComplete\",\"upHandler\",\"downHandler\"]),y()(((e={})[n]=!0,e[t.className]=!!t.className,e[n+\"-disabled\"]=a,e[n+\"-focused\"]=this.state.focused,e))),d=\"\",f=\"\",m=this.state.value;if(m||0===m)if(isNaN(m))d=n+\"-handler-up-disabled\",f=n+\"-handler-down-disabled\";else{var v=Number(m);v>=t.max&&(d=n+\"-handler-up-disabled\"),v<=t.min&&(f=n+\"-handler-down-disabled\")}var g={};for(var b in t)!t.hasOwnProperty(b)||\"data-\"!==b.substr(0,5)&&\"aria-\"!==b.substr(0,5)&&\"role\"!==b||(g[b]=t[b]);var w=!t.readOnly&&!t.disabled,C=this.getInputDisplayValue(),O=void 0,E=void 0;s?(O={onTouchStart:w&&!d?this.up:S,onTouchEnd:this.stop},E={onTouchStart:w&&!f?this.down:S,onTouchEnd:this.stop}):(O={onMouseDown:w&&!d?this.up:S,onMouseUp:this.stop,onMouseLeave:this.stop},E={onMouseDown:w&&!f?this.down:S,onMouseUp:this.stop,onMouseLeave:this.stop});var x=!!d||a||o,N=!!f||a||o;return h.a.createElement(\"div\",{className:p,style:t.style,title:t.title,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onMouseOver:t.onMouseOver,onMouseOut:t.onMouseOut},h.a.createElement(\"div\",{className:n+\"-handler-wrap\"},h.a.createElement(P,i()({ref:this.saveUp,disabled:x,prefixCls:n,unselectable:\"unselectable\"},O,{role:\"button\",\"aria-label\":\"Increase Value\",\"aria-disabled\":!!x,className:n+\"-handler \"+n+\"-handler-up \"+d}),l||h.a.createElement(\"span\",{unselectable:\"unselectable\",className:n+\"-handler-up-inner\",onClick:T})),h.a.createElement(P,i()({ref:this.saveDown,disabled:N,prefixCls:n,unselectable:\"unselectable\"},E,{role:\"button\",\"aria-label\":\"Decrease Value\",\"aria-disabled\":!!N,className:n+\"-handler \"+n+\"-handler-down \"+f}),c||h.a.createElement(\"span\",{unselectable:\"unselectable\",className:n+\"-handler-down-inner\",onClick:T}))),h.a.createElement(\"div\",{className:n+\"-input-wrap\",role:\"spinbutton\",\"aria-valuemin\":t.min,\"aria-valuemax\":t.max,\"aria-valuenow\":m},h.a.createElement(\"input\",i()({required:t.required,type:t.type,placeholder:t.placeholder,onClick:t.onClick,onMouseUp:this.onMouseUp,className:n+\"-input\",tabIndex:t.tabIndex,autoComplete:u,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:w?this.onKeyDown:S,onKeyUp:w?this.onKeyUp:S,autoFocus:t.autoFocus,maxLength:t.maxLength,readOnly:t.readOnly,disabled:t.disabled,max:t.max,min:t.min,step:t.step,name:t.name,id:t.id,onChange:this.onChange,ref:this.saveInput,value:C,pattern:t.pattern},g))))},t}(h.a.Component);M.propTypes={value:v.a.oneOfType([v.a.number,v.a.string]),defaultValue:v.a.oneOfType([v.a.number,v.a.string]),focusOnUpDown:v.a.bool,autoFocus:v.a.bool,onChange:v.a.func,onPressEnter:v.a.func,onKeyDown:v.a.func,onKeyUp:v.a.func,prefixCls:v.a.string,tabIndex:v.a.oneOfType([v.a.string,v.a.number]),disabled:v.a.bool,onFocus:v.a.func,onBlur:v.a.func,readOnly:v.a.bool,max:v.a.number,min:v.a.number,step:v.a.oneOfType([v.a.number,v.a.string]),upHandler:v.a.node,downHandler:v.a.node,useTouch:v.a.bool,formatter:v.a.func,parser:v.a.func,onMouseEnter:v.a.func,onMouseLeave:v.a.func,onMouseOver:v.a.func,onMouseOut:v.a.func,onMouseUp:v.a.func,precision:v.a.number,required:v.a.bool,pattern:v.a.string,decimalSeparator:v.a.string},M.defaultProps={focusOnUpDown:!0,useTouch:!1,prefixCls:\"rc-input-number\",min:-N,step:1,style:{},onChange:S,onKeyDown:S,onPressEnter:S,onFocus:S,onBlur:S,parser:function(e){return e.replace(/[^\\w\\.-]+/g,\"\")},required:!1,autoComplete:\"off\"};var j=function(){var e=this;this.onKeyDown=function(t){for(var n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var o=e.props,i=o.onKeyDown,s=o.onPressEnter;if(t.keyCode===b.a.UP){var u=e.getRatio(t);e.up(t,u),e.stop()}else if(t.keyCode===b.a.DOWN){var l=e.getRatio(t);e.down(t,l),e.stop()}else t.keyCode===b.a.ENTER&&s&&s(t);e.recordCursorPosition(),e.lastKeyCode=t.keyCode,i&&i.apply(void 0,[t].concat(a))},this.onKeyUp=function(t){for(var n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var o=e.props.onKeyUp;e.stop(),e.recordCursorPosition(),o&&o.apply(void 0,[t].concat(a))},this.onChange=function(t){var n=e.props.onChange;e.state.focused&&(e.inputting=!0),e.rawInput=e.props.parser(e.getValueFromEvent(t)),e.setState({inputValue:e.rawInput}),n(e.toNumber(e.rawInput))},this.onMouseUp=function(){var t=e.props.onMouseUp;e.recordCursorPosition(),t&&t.apply(void 0,arguments)},this.onFocus=function(){var t;e.setState({focused:!0}),(t=e.props).onFocus.apply(t,arguments)},this.onBlur=function(t){for(var n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var o=e.props.onBlur;e.inputting=!1,e.setState({focused:!1});var i=e.getCurrentValidValue(e.state.inputValue);t.persist();var s=e.setValue(i);if(o){var u=e.input.value,l=e.getInputDisplayValue({focus:!1,value:s});e.input.value=l,o.apply(void 0,[t].concat(a)),e.input.value=u}},this.getInputDisplayValue=function(t){var n=t||e.state,a=n.focused,r=n.inputValue,o=n.value,i=void 0;null==(i=a?r:e.toPrecisionAsStep(o))&&(i=\"\");var s=e.formatWrapper(i);return _(e.props.decimalSeparator)&&(s=s.toString().replace(\".\",e.props.decimalSeparator)),s},this.recordCursorPosition=function(){try{e.cursorStart=e.input.selectionStart,e.cursorEnd=e.input.selectionEnd,e.currentValue=e.input.value,e.cursorBefore=e.input.value.substring(0,e.cursorStart),e.cursorAfter=e.input.value.substring(e.cursorEnd)}catch(t){}},this.restoreByAfter=function(t){if(void 0===t)return!1;var n=e.input.value,a=n.lastIndexOf(t);return-1!==a&&(a+t.length===n.length&&(e.fixCaret(a,a),!0))},this.partRestoreByAfter=function(t){return void 0!==t&&Array.prototype.some.call(t,function(n,a){var r=t.substring(a);return e.restoreByAfter(r)})},this.stop=function(){e.autoStepTimer&&clearTimeout(e.autoStepTimer)},this.down=function(t,n,a){e.pressingUpOrDown=!0,e.step(\"down\",t,n,a)},this.up=function(t,n,a){e.pressingUpOrDown=!0,e.step(\"up\",t,n,a)},this.saveUp=function(t){e.upHandler=t},this.saveDown=function(t){e.downHandler=t},this.saveInput=function(t){e.input=t}};t.default=M}},[[\"H0SL\",\"5d41\",\"9da1\",\"ad9d\"]]]);"}